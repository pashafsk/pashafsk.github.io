<head>
 <!-- Include Plotly.js -->
 <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 <style>
    table, th,tr, {
      border: 1px solid black;
    }
    th{
    font-weight: bold;
    font-size: 16;
    }
  .ind tr:nth-child(even) {background-color: lightblue;}
</style>
</head>
<body>
  <div class="ind">
  </div>
  <script>

function indicators(symbol){
var chart = 'https://cors.io?https://us-central1-stocks-235104.cloudfunctions.net/tsi?name='+symbol;
var html='';
$.getJSON(chart, function(data){
     html += '<table>';
     html += '<th>Date<th>Close</th><th>$change</th><th>%volchange</th><th>tsi</th><th>ATR14</th><th>ATR20</th><th>10Day</th><th>20Day</th><th>50Day</th><th>100Day</th><th>200Day</th>'
  $.each(data,function(index, daily){
     console.log(daily.Date);
      html+='<tr><td>'+daily.Date+'</td><td>'+daily.Close.toFixed(2)+'</td>';
      html+= '<td>'+daily.change.toFixed(2)+'</td><td>'+daily.Volchange.toFixed(2)+'</td>';
      html+='<td>'+daily.tsi.toFixed(2)+'</td><td>'+daily.ATR14.toFixed(2)+'</td>';
      html+='<td>'+daily.ATR20.toFixed(2)+'</td><td>'+daily["10sma"].toFixed(2)+'</td>';
      html+='<td>'+daily["20sma"].toFixed(2)+'</td><td>'+daily["50sma"].toFixed(2)+'</td>';
      html+='<td>'+daily["100sma"].toFixed(2)+'</td><td>'+daily["200sma"].toFixed(2)+'</td></tr>';
      
      console.log(daily.Date.toString)
    });
  html +='</table>';


$('.ind').html(html);
});

}

    $(function() {
      var urlParams = new URLSearchParams(window.location.search);
        //console.log(urlParams.toString());
        var ticker = urlParams.get('tickerSymbol');
        //console.log(ticker);
        $('#tickerSymbol').val(ticker);
        //console.log($('#tickerSymbol').val());
        indicators(ticker);
    });
   

</script>
</body>